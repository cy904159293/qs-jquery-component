webpackJsonp([10],{"/dOB":function(e,t){},"0iPh":function(e,t){e.exports=window.jQuery},"9I3e":function(e,t){},EOjR:function(e,t,n){"use strict";var i=a(n("0iPh")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("6QEj")),s=n("YI4r");n("9I3e");var l=a(n("rTgW")),o=a(n("gntN")),c=a(n("THgg"));function a(e){return e&&e.__esModule?e:{default:e}}(new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(){},this.getPlaces=function(e){return(0,c.default)({url:"http://restapi.amap.com/v3/config/district?key=48a5cede312f0221ecc0e70b1b6dba3f&subdistrict=1",data:{keywords:e}})},this._bindEvent=function(){t.outer.on("click",function(){})},this._init=function(){t.couplet1=new l.default({obj:(0,i.default)("#test1"),placeholder:"请选择",list:new Array(8).fill(1).map(function(e,t){return{name:"选项"+(t+1),id:t+1,children:new Array(12).fill(1).map(function(e,n){return{name:"选项"+(t+1)+"-"+(n+1),id:t+1+"-"+(n+1)}})}}),renderLi:function(e){return e.name},renderNext:function(e,t){return new window.Promise(function(e){e(t.children)})},renderResult:function(e,t){return e.reduce(function(e,t){return e=e.children[t]},{children:t}).name},onSelectChange:function(e,t){var n=e.reduce(function(e,t){return e=e.children[t]},{children:t});(0,o.default)({type:"info",msg:"当前选中："+n.name})}}),t.couplet2=new l.default({obj:(0,i.default)("#test2"),placeholder:"选择地区",titles:["选择省","选择市","选择区"],hasNext:function(e){return"province"===e.level||"city"===e.level},list:[],renderNext:function(e,n){return new window.Promise(function(e){if(n.children)return e(n.children);t.getPlaces(n.name).then(function(t){"1"===t.status&&e(t.districts[0].districts)})})},renderResult:function(e,t){var n=void 0!==e[0]?t[e[0]]:{},i=void 0!==e[1]?n.children[e[1]]:{},r=void 0!==e[2]?i.children[e[2]]:{};return[n.name,i.name,r.name].filter(function(e){return e}).join("/")},onSelectChange:function(e,t){var n=void 0!==e[0]?t[e[0]]:{},i=void 0!==e[1]?n.children[e[1]]:{},r=void 0!==e[2]?i.children[e[2]]:{};(0,o.default)({type:"success",msg:"当前选中："+[n.name,i.name,r.name].filter(function(e){return e}).join("/")})}}),t.getPlaces("中国").then(function(e){"1"===e.status&&t.couplet2.renderList(e.districts[0].districts)}),r.initCode(t.outer),r.createDetailTable({outer:t.outer,propsList:s.propsList,apiList:s.apiList}),t._bindEvent()},this.outer=(0,i.default)("#coupletmenuPageOuter"),this._init()}).init()},YI4r:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.propsList=[{param:"obj",description:"一个长度的jqueryDom",type:"jQueryObject",default:""},{param:"renderLi",description:"行渲染回调",type:"Function",default:"row=>row.name"},{param:"titles",description:"级联表头标题",type:"Array",default:'["选项1",...]'},{param:"list",description:"数据源",type:"Array",default:"[]"},{param:"hasNext",description:"当前选中是否包含下级选项的回调函数",type:"function",default:"row=>row.children && row.children.length"},{param:"renderNext",description:"获取下级数据的回调函数，必须返回一个promise对象",type:"function",default:""},{param:"renderResult",description:"显示选中结果的回调函数",type:"function",default:""},{param:"placeholder",description:"未选择时的文案",type:"String",default:"不限"},{param:"onSelectChange",description:"选中回调函数",type:"function",default:"()=>{}"}],t.apiList=[{funcName:"renderList",description:"动态设置一级选项",params:"list:Array"},{funcName:"setData",description:"设置当前显示的值，但并不处理选项",params:"data:String"},{funcName:"reset",description:"重置组件",params:""}]},rTgW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n("0iPh"),s=(i=r)&&i.__esModule?i:{default:i};n("/dOB");var l=function(){var e=this;this._renderHtml=function(){e.obj.html('<div class="ys-couple-menu-c">\n<div class="ys-couple-menu-btn"><span class="ys-couple-menu-value">'+e.placeholder+'</span><i class="fa fa-caret-down"></i></div>\n<div class="ys-couple-menu-list-o" style="width: 120px">\n    '+e._getLevelOuter(1)+"\n</div>\n</div>"),e.outer=e.obj.find(".ys-couple-menu-c"),e.drop=e.outer.find(".ys-couple-menu-list-o"),e.valueC=e.outer.find(".ys-couple-menu-value"),e.level1C=e.drop.find(".level1 .couple-menu-c"),e.renderList()},this._getLevelOuter=function(t){return'<div class="ys-couple-menu-list-c level'+t+'" style="left: '+120*(t-1)+'px"><div class="couple-menu-header">'+(e.titles[t-1]||t+"级分类")+'</div><div class="couple-menu-c"></div><div class="couple-menu-footer">'+(1===t?'<div class="ys-couple-menu-cbtn">确认选择</div>':"")+"</div></div>"},this.renderList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.list;return e.list=t,e.level1C.html(t.map(function(t,n){var i=e.renderLi(t,n);return'<div class="ys-couple-menu-i" data-index="'+n+'" title="'+i+'">'+i+(e.hasNext(t)?'<i class="fa fa-caret-right"></i>':"")+"</div>"})),e},this.setData=function(t){e.valueC.text(t).toggleClass("has-value",!0)},this.reset=function(){e._hideLevel(1),e.drop.find(".level1").find(".ys-couple-menu-i").removeClass("active"),e.valueC.text(e.placeholder)},this.toggleDrop=function(t){if("open"===t){if(e.isOpen)return;e.outer.addClass("ys-open")}else if("close"===t){if(!e.isOpen)return;e.outer.removeClass("ys-open")}else e.outer.toggleClass("ys-open");e.isOpen=!e.isOpen,e.outer.hasClass("ys-open")?e._openDrop():e._closeDrop()},this._openDrop=function(){e.drop.addClass("open-start"),setTimeout(function(){e.drop.addClass("opening"),setTimeout(function(){e.drop.removeClass("open-start").addClass("open-end")},0)},0)},this._closeDrop=function(){e.drop.removeClass("open-end").addClass("open-start"),setTimeout(function(){e.drop.removeClass("opening"),setTimeout(function(){e.drop.removeClass("open-start")},0)},100)},this._renderLevel=function(t){var n=t.length+1;e.drop.find(".level"+n).length?e.drop.css({width:120*n+"px"}).find(".level"+n).show().nextAll().hide():e.drop.css({width:120*n+"px"}).find(".level"+(n-1)).after(e._getLevelOuter(n));var i=e.checks.reduce(function(e,t){return e=e.children[t]},{children:e.list});e.renderNext(e.checks,i,e.list).then(function(r){i.children=r,e.drop.find(".level"+n+" .couple-menu-c").html(r.map(function(n,i){var r=e.renderLi(n,i);return'<div class="ys-couple-menu-i" data-index="'+t.join("-")+"-"+i+'" title="'+r+'">'+r+(e.hasNext(n)?'<i class="fa fa-caret-right"></i>':"")+"</div>"})),e._bindScroll(n)})},this._hideLevel=function(t){e.drop.css({width:120*t+"px"}).find(".level"+t).nextAll().hide()},this._bindEvent=function(){var t=e;e.outer.on("click",".ys-couple-menu-btn",function(){t.toggleDrop()}).on("click",".ys-couple-menu-i",function(){var e=((0,s.default)(this).data("index")+"").split("-"),n=e.reduce(function(e,t){return e=e.children[t]},{children:t.list}),i=e.length,r=e[i-1]-0;t.checks[i-1]=r,t.checks.length=i,t.drop.find(".level"+i).find(".ys-couple-menu-i").eq(r).addClass("active").siblings().removeClass("active"),t.hasNext(n)?t._renderLevel(e):t._hideLevel(i)}).on("click",".ys-couple-menu-cbtn",function(){t.checks.length&&t.onSelectChange(t.checks,t.list),t.checks.length&&t.valueC.text(t.renderResult(t.checks,t.list)||t.placeholder).toggleClass("has-value",!!t.renderResult(t.checks,t.list)),t.toggleDrop("close")}),(0,s.default)(document).on("mousedown",function(e){0===(0,s.default)(e.target).closest(".ys-open").length&&t.isOpen&&(t.checks.length&&t.onSelectChange(t.checks,t.list),t.checks.length&&t.valueC.text(t.renderResult(t.checks,t.list)||t.placeholder).toggleClass("has-value",!!t.renderResult(t.checks,t.list)),t.toggleDrop("close"))})},this._bindScroll=function(t){var n,i=e.drop.find(".level"+t),r=i.find(".couple-menu-c"),s=i.find(".couple-menu-header"),l=i.find(".couple-menu-footer");r.scrollTop(0),r.children(":last").position().top+30>r.height()?l.addClass("shadow"):l.removeClass("shadow"),r.length&&r.off("scroll").on("scroll",(n=r.height(),function(){var e=r.scrollTop(),t=this.scrollHeight;s.toggleClass("shadow",e>0),l.toggleClass("shadow",e+n+20<t)}))},this._init=function(){e._renderHtml(),e._bindEvent()}};t.default=function e(t){var n=t.obj,i=t.renderLi,r=void 0===i?function(e){return e.name}:i,o=t.titles,c=void 0===o?[]:o,a=t.list,u=void 0===a?[]:a,d=t.hasNext,p=void 0===d?function(e){return e.children&&e.children.length}:d,f=t.renderNext,h=t.renderResult,v=t.placeholder,m=void 0===v?"不限":v,g=t.onSelectChange,y=void 0===g?function(){}:g;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.call(this),!(n instanceof s.default)||n instanceof s.default&&1!==n.length)throw new Error("CoupletMenu params obj must be an one length jqueryDom");this.obj=n,this.renderLi=r,this.list=u,this.onSelectChange=y,this.placeholder=m,this.hasNext=p,this.renderNext=f,this.renderResult=h,this.titles=c,this.checks=[],this._init()}}},["EOjR"]);