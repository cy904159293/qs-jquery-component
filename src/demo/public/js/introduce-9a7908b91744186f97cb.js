webpackJsonp([35],{"/gwZ":function(t,e){},"0iPh":function(t,e){t.exports=window.jQuery},MItD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.data=new Array(30).join(",").split(",").map(function(t,e){var n=Math.ceil(3*Math.random())+2,a=new Array(n).join(",").split(",").map(function(t,n){return"key"+(e+1)+"-"+(n+1)}),i=a.reduce(function(t,n,a){return t[n]="名称"+(e+1)+"-"+(a+1),t},{}),r=Math.ceil(5*Math.random())+2,o=new Array(r).join(",").split(",").map(function(t,n){var i=Math.ceil(6*Math.random())-1,r=new Array(i).join(",").split(",").map(function(t,i){return a.reduce(function(t,a,r){return t[a]="data"+(e+1)+"-"+(n+1)+"-"+(i+1)+"-"+(r+1),t},{})});return{entName:"企业名称"+(e+1)+"-"+(n+1),entId:"efqefwefwef"+(e+1)+"-"+(n+1),isCompany:"Y",detail:i?r:[],totalRecord:5===i?5+Math.ceil(20*Math.random()):i}});return{type:"type"+(e+1),keys:a,options:i,list:o}})},a8yg:function(t,e,n){"use strict";var a=s(n("0iPh")),i=n("MItD");n("/gwZ");var r=s(n("RfmY")),o=s(n("9vu6")),u=s(n("1uvi")),c=s(n("eI+r"));function s(t){return t&&t.__esModule?t:{default:t}}function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init=function(){e._getAllData().then(function(t){e.totalData=t,e._renderPage()})},this._getAllData=function(){return new window.Promise(function(t){setTimeout(function(){t(i.data)},1e3)})},this._getPageData=function(t,n,a){var i=e.tableRefs[n];"delete"===a&&(t=i.getPagination().current);var r=i.getDataSource();setTimeout(function(){i.setData({dataSource:r,pagination:{current:t},conditionChange:!!a})},500)},this._renderPage=function(){e.currentData=e.totalData.find(function(t){return t.type===e.typeList[e.typeIndex]}),e.currentData&&(e.tableC.empty(),e.tableRefs=e.currentData.list.map(function(t,n){e.tableC.append('<div class="ent-section" style="margin-bottom: 30px">\n<div class="ent-name-c" style="margin-bottom: 10px">'+t.entName+'</div>\n<div class="table-c"></div>\n</div>');var a=void 0,i=void 0;switch(e.currentData.type){case"type2":case"type4":a=[{name:"序号",width:60}].concat(l(e.currentData.keys.map(function(t){return{name:e.currentData.options[t],width:100}})),[{name:"操作",width:60}]),i=[function(t,e,n){return(n.current-1)*n.pageSize+e+1}].concat(l(e.currentData.keys.map(function(t,n){return function(t){return t[e.currentData.keys[n]]}})),[function(t,e){return'<a class="btn btn-link edit-row" style="padding: 0" data-index="'+n+"-"+e+'">删除</a>'}]);break;default:a=[{name:"序号",width:60}].concat(e.currentData.keys.map(function(t){return{name:e.currentData.options[t],width:100}})),i=[function(t,e,n){return(n.current-1)*n.pageSize+e+1}].concat(e.currentData.keys.map(function(t,n){return function(t){return t[e.currentData.keys[n]]}}))}return new r.default({outer:e.tableC.children(":last").find(".table-c"),headers:a,emptyMsg:"该企业无数据",renderTrs:i,dataSource:t.detail,pagination:{show:!0,pageSize:5,total:t.totalRecord,onChange:function(t){var a=t.current;e._getPageData(a,n)},isJump:!0},storage:!0})}))},this._bindEvent=function(){var t=e;e.outer.on("click",".item-title",function(){t.typeIndex=(0,a.default)(this).data("index"),t._renderPage()}).on("click",".edit-row",function(){var e=(0,a.default)(this).data("index"),n=e.split("-")[0],i=e.split("-")[1],r=t.tableRefs[n].getRowData(i);console.log(r),t.floatModal.show({title:"删除该列？",obj:(0,a.default)(this),side:3,fn:function(){t.floatModal.hide(),(0,c.default)({title:"删除成功",msg:t.typeList[t.typeIndex]+" 表格"+n+" 第"+i+"列成功删除"}),t.tableRefs[n].removeItem(i).then(function(){t._getPageData(1,n,"delete")})}})})},this._init=function(){e.outer.find(".items-title").html(e.typeList.map(function(t,e){return'<button class="btn btn-default item-title" style="margin: 5px" data-index="'+e+'">'+t+"</button>"})),e.tableC.html('<div style="height: 300px" class="flexbox aic jcc">'+(0,o.default)()+"</div>"),e.floatModal=new u.default({noInput:!0}),e._bindEvent()},this.outer=(0,a.default)("#introduce"),this.tableC=this.outer.find("#tables"),this.totalData=[],this.typeList=new Array(30).join(",").split(",").map(function(t,e){return"type"+(e+1)}),this.typeIndex=0,this.tableRefs=[],this._init()}).init()}},["a8yg"]);