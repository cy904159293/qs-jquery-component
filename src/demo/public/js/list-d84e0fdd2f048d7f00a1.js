webpackJsonp([7],{"+DlJ":function(t,e){},"0iPh":function(t,e){t.exports=window.jQuery},"4pb2":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i("id4V"));i("WhZ1"),i("+DlJ");var o=s(i("9vu6"));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){var i=this,n=e.outer,a=e.dataSource,r=e.renderTr,o=e.pagination,s=void 0===o?{show:!1}:o,u=e.storage,l=void 0!==u&&u,d=e.loading,c=void 0===d||d,h=e.emptyMsg,g=void 0===h?"暂无数据":h,f=e.afterRender,p=void 0===f?function(){}:f,m=e.renderEmpty;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reload=function(){i._renderList()},this.updateItem=function(t){var e=i.listC.children().eq(t);setTimeout(function(){e.addClass("tr-updating")},10),setTimeout(function(){e.addClass("tr-updated")},10),setTimeout(function(){e.removeClass("tr-updated")},3e3)},this.removeItem=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";return new window.Promise(function(n){var a=i.listC.children().eq(t);a.addClass("tr-removing-"+e),setTimeout(function(){a.addClass("tr-removed-"+e)},10),setTimeout(n,400,"yes")})},this.dataSource=a,this.renderTr=r,this.loading=c,this.pagination=this._formatPagination(s),this.storage=l,this.emptyMsg=g,!(n instanceof $)||n instanceof $&&1!==n.length)throw new Error("List param outer must be one length jqueryDom");if("function"!=typeof this.renderTr)throw new Error("List param renderTr must be a function");if("function"!=typeof p)throw new Error("List param afterRender must be a function");this.outer=n.addClass("rel").css("overflow-x","hidden"),this.table=null,this.paginarC=null,this.paginar=null,this.noMsgC=null,this.loadingC=null,this.afterRender=p,this.renderEmpty=m,this.dataSourceMap={},this._init()}return a(t,[{key:"setData",value:function(t){var e=t.dataSource,i=t.pagination,n=void 0===i?this.pagination:i,a=t.conditionChange,r=void 0!==a&&a;if(this.dataSource=e,this.paginar){var o=n.show,s=void 0===o||o,u=n.current,l=n.pageSize,d=n.total,c=this.pagination,h=c.show,g=c.current,f=c.pageSize,p=c.total;(!u||u<1)&&(u=1),(!l||l<1)&&(l=f),d<0&&(d=p),s===h&&u===g&&l===f&&d===p||(this.pagination=$.extend(this.pagination,{current:Number(u),pageSize:Number(l),total:Number(d)}),this.paginar.setPageData(this.pagination)),(d===p||1===u||r)&&this.storage&&(r&&(this.dataSourceMap={}),this.dataSourceMap["current"+u]=this.dataSource)}return this._renderList(),this.loading&&this.paginar&&this.paginar.toggleLoading(),new window.Promise(function(t){t()})}},{key:"getDataSource",value:function(){return this.dataSource}},{key:"getRowData",value:function(t){return this.dataSource[t]}},{key:"getPagination",value:function(){return this.pagination}},{key:"_formatPagination",value:function(t){var e=t.show,i=t.pageSize,n=t.current,a=t.total,r=t.isJump,o=t.position,s=t.onChange;return e?(n=n||1,{show:e,pageSize:i=i||this.dataSource.length,current:n,total:a,isJump:r=r||!1,position:o=o||"right",loading:this.loading,onChange:s}):t}},{key:"_getHtml",value:function(){return'<div class="list-container"></div><div class="ys-table-no-msg-c">'+this._getNomsgHtml()+"</div>"+this._getLoadingHtml()+(this.pagination.show?'<div class="ys-paginar"></div>':"")}},{key:"_getNomsgHtml",value:function(){return"function"==typeof this.renderEmpty?this.renderEmpty():'<div class="ys-table-no-msg">'+this.emptyMsg+"</div>"}},{key:"_getLoadingHtml",value:function(){return'<div class="ys-table-loading"><span class="ys-table-loading-span">'+(0,o.default)("small")+"</span>数据加载中...</div>"}},{key:"_renderList",value:function(){if(!this.dataSource)return this.listC.hide(),this.noMsgC.hide(),this.paginarC.hide(),void this.loadingC.show();this.loadingC.hide(),this.noMsgC.toggle(!this.dataSource.length),this.paginarC.toggle(!!this.dataSource.length&&this.pagination.show),this.listC.toggle(!!this.dataSource.length),this.dataSource.length&&(this.listC.html(this._getList()),this.afterRender())}},{key:"_renderHtml",value:function(){var t=this;this.outer.html(this._getHtml()),this.listC=this.outer.find(".list-container"),this.noMsgC=this.outer.find(".ys-table-no-msg-c"),this.paginarC=this.outer.find(".ys-paginar"),this.loadingC=this.outer.find(".ys-table-loading"),this._renderList(),this.pagination.show&&(this.paginar=new r.default(n({outer:this.paginarC},this.pagination,{onChange:function(e){var i=e.current,n=e.pageSize,a=e.total;t.pagination.current=i,t.storage&&t.dataSourceMap["current"+i]?(t.dataSource=t.dataSourceMap["current"+i],t._renderList(),t.loading&&t.paginar.toggleLoading()):t.pagination.onChange({current:i,pageSize:n,total:a})}})))}},{key:"_getList",value:function(){var t=this;return this.dataSource.map(function(e,i){return t.renderTr(e,i,t.pagination)}).join("")}},{key:"_init",value:function(){this._renderHtml()}}]),t}();e.default=u},JT5I:function(t,e){},S1fD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.propsList=[{param:"outer",description:"组件容器，一个长度的jqueryDom",type:"jQueryObject",default:""},{param:"dataSource",description:"列表格数据源",type:"Array",default:""},{param:"renderTr",description:"行渲染回调，3个参数：row 当前行数据, index 当前行下标, pagination:当前分页数据",type:"Function",default:""},{param:"pagination",description:"分页相关参数",type:"Object | { show(false) | Boolean是否显示分页, total | Number总条数, pageSize | Number每页条数, current | Number当前页码 }",default:"{ show:false }"},{param:"storage",description:"是否缓存分页数据",type:"Boolean",default:"true"},{param:"loading",description:"日期input，一个长度的jqueryDom",type:"jQueryObject | input",default:""},{param:"emptyMsg",description:"缺省文案",type:"String",default:"暂无数据"},{param:"afterRender",description:"列表渲染完成回调函数",type:"Function",default:"()=>{}"}],e.apiList=[{funcName:"setData",description:"设置列表数据分页数据",params:"{ dataSource: Array 表格数据, pagination:Object | { current,total,pageSize } 分页数据, conditionChange:Boolean 是否条件改变 }"},{funcName:"getDataSource",description:"获取当前列表数据，返回一个数组",params:""},{funcName:"getRowData",description:"获取某一行数据",params:"index:Number 行数"},{funcName:"getPagination",description:"获取当前分页参数",params:""},{funcName:"removeItem",description:"某一行的移除动画",params:"index:Number 行数"},{funcName:"updateItem",description:"某一行的更新动画",params:"index:Number 行数"}]},jwBI:function(t,e,i){"use strict";var n=l(i("0iPh")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("6QEj")),r=i("S1fD");i("JT5I");var o=l(i("4pb2")),s=l(i("eI+r")),u=l(i("1uvi"));function l(t){return t&&t.__esModule?t:{default:t}}(new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._getMorkListData=function(t){return new Array(5).fill(1).map(function(e,i){return{name:"项目项目"+t+(i+1),qz:5+Math.ceil(15*Math.random()),result:70+Math.ceil(30*Math.random())}})},this._getMorkList=function(t,i){var n=e._getMorkListData(t);e.list.setData({dataSource:n,pagination:{current:t,total:56},conditionChange:!!i})},this.init=function(){setTimeout(function(){e._getMorkList(1)},1e3)},this._bindEvent=function(){var t=e;e.outer.on("click",".btn-test1",function(){var e=(0,n.default)(this).data("index");t.list.getRowData(e),t.floatModal.show({title:"修改完成度",obj:(0,n.default)(this),side:3,placeholder:"输入完成度0-100",fn:function(i){if(i<0||i>100)t.floatModal.showMsg("范围不对");else{t.floatModal.hide();var n=t.list.getDataSource();n[e].result=i,t.list.setData({dataSource:n}).then(function(){t.list.updateItem(e)})}}})}).on("click",".btn-test2",function(){var e=(0,n.default)(this).data("index"),i=t.list.getRowData(e);t.list.removeItem(e).then(function(){t._getMorkList(t.list.getPagination().current,"delete"),(0,s.default)({title:"删除成功",msg:i.name+"删除成功！"})})})},this._init=function(){e.list=new o.default({outer:(0,n.default)("#test1"),renderTr:function(t,e){return'<div class="item-outer flexbox aic">\n<div class="flex1">'+t.name+'</div><div class="flex1">权重'+t.qz+'%</div><div class="flex1">完成度'+t.result+'%</div><div class="flex1"><button class="btn btn-default btn-test1" style="margin-right: 5px" data-index="'+e+'">修改</button><button class="btn btn-default btn-test2" data-index="'+e+'">删除</button></div>\n</div>'},pagination:{show:!0,pageSize:5,onChange:function(t){var i=t.current;setTimeout(function(){e._getMorkList(i)},500)}},storage:!0}),e.floatModal=new u.default({}),a.initCode(e.outer),a.createDetailTable({outer:e.outer,propsList:r.propsList,apiList:r.apiList}),e._bindEvent()},this.outer=(0,n.default)("#listPageOuter"),this._init()}).init()}},["jwBI"]);